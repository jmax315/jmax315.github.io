<html><head><link rel="stylesheet" type="text/css" href="/stylesheets/stylesheet.css" /><link rel="stylesheet" href="/stylesheets/dracula.css" /><script src="/scripts/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script><title>Exploring Rails Projects With Metaprogramming: Overview</title></head><body><div id="header"><h1>John's Free Energy</h1><h2>Exploring Rails Projects With Metaprogramming: Overview</h2></div><div id="sidebar"><div class="sidebar-page-set-name">Background</div><div id="page-set"><div class="sidebar-page-set-page"><a href="/background/free_energy.html">Why Free Energy?</a></div><div class="sidebar-page-set-page"><a href="/background/about_me.html">About Me</a></div><div class="sidebar-page-set-page"><a href="/background/how_i_started_with_computers.html">How I Discovered Computers</a></div></div><div class="sidebar-page-set-name">Updates</div><div id="page-set" /><div class="sidebar-page-set-name">Projects</div><div id="page-set"><div class="sidebar-page-set-page"><a href="/exploring_ror/toc.html">Exploring Ruby on Rails Projects With Metaprogramming</a></div></div><div class="sidebar-page-set-name">An Lc Ladder Filter Calculator</div><div id="page-set"><div class="sidebar-page-set-page"><a href="/lc_calculator/overview.html">Overview</a></div></div><div class="sidebar-page-set-name">Exploring Rails Projects With Metaprogramming</div><div id="page-set"><div class="sidebar-page-set-page"><a href="/exploring_ror/overview.html">Overview</a></div><div class="sidebar-page-set-page"><a href="/exploring_ror/getting_started.html">Getting Started</a></div><div class="sidebar-page-set-page"><a href="/exploring_ror/better_monkey_patching.html">Better Monkey Patching</a></div><div class="sidebar-page-set-page"><a href="/exploring_ror/creating_the_app.html">Creating the App</a></div><div class="sidebar-page-set-page"><a href="/exploring_ror/creating_the_app_class.html">Creating the App Object</a></div><div class="sidebar-page-set-page"><a href="/exploring_ror/creating_the_probe.html">Creating the Probe</a></div></div></div><div id="content"><div id="top-navigation"><span class="navigation-prev"><a href="toc.html">&lt; Prev</a></span><span class="navigation-up"><a href="toc.html">^ Up</a></span><span class="navigation-next"><a href="getting_started.html">Next &gt;</a></span></div><h2>Overview</h2><p>In a perfect world, every project I worked on would be a completely
green-field project, that I would know every detail about. At the very
least, if there were some portion of it that I didn't know intimately,
the person who did would be readily available for me to talk to
whenever I needed to.</p><p>Such, alas, is not the world we live in. Even in a new project where I
have access to all the other team members, we're likely to be using
code generators and third party libraries. And most programming work
isn't green-field; it's usually stepping into an ongoing project to
add features and fix bugs. Usually, some of the folks who've done
previous work aren't available for consultation, either. Finally, much
though it shames me to admit it, my memory is not perfect; sometimes I
have to figure out my own code.</p><p>So, a large part of my work involves understanding so-called legacy
code. The tried and true method of this involves using an IDE or other
code browsers, and relying on code conventions to let me quickly see
what's going on.</p><p>Ruby on Rails is both particularly good and particularly annoying in
this respect. It's an opinionated framework, with a lot of conventions
on how things are done, and for the most part, I agree with Rails'
opinions. It's also benefited from the efforts of a lot of talented
people, so Rails applications are built on a framework that starts
better than average.</p><p>Furthermore, the RubyGems library system makes it rather easy to add
additional libraries; indeed, Rails itself is structured as a set of
gems. If there's an existing gem to do something you need, it's
usually easy to add it to a Rails application. Because of this, the
'build it yourself' tendency that almost all developers have to some
extent is somewhat muted.</p><p>But Rails' strengths can also work against it. For example, not all
gems are well written. In a less convenient ecosystem, a poorly
written library would also be difficult to integrate. In Rails, it's
usually pretty easy to add a new gem even if the gem's internal code
quality is poor. In this situation, the problem won't show up until
bugs start appearing that turn out to be due to the gem. By the time
that happens, ripping out the offending gem usually takes a
significant effort.</p><p>Furthermore, one of the holes in the RubyGems system is that it's much
easier to add a gem than it is to figure out whether an already
included gem is actually necessary. It's common, in Rails projects
that have been around for a while, for the list of gems to include
some that aren't actually necessary.</p><p>Ultimately, of course, these sorts of problems are the reason why
skilled developers are necessary in the first place. But however
skilled one may be, understanding a non-trivial application is a hard
problem; we need every tool we can find to attack it.</p><p>Most ways to understand legacy code are static analysis methods;
essentially automated (or sometimes not so automated) versions of
staring at the code. That's useful, but it's not the only way to
attack the problem.</p><p>I'm going to use another of Ruby's features, its support for
metaprogramming, to attack the problem from a different angle.  Using
metaprogramming, we can crawl inside a running app and watch what's
going on. I've done this before, on an ad-hoc basis
using <code>irb</code> and <code>pry</code> (both of which I
unconditionally recommend), but this project is about building a
reusable tool.</p><p>The code for this project is available <a href="https://github.com/jmax315/ruby-explorer.git">on Github</a></p><div id="bottom-navigation"><span class="navigation-prev"><a href="toc.html">&lt; Prev</a></span><span class="navigation-up"><a href="toc.html">^ Up</a></span><span class="navigation-next"><a href="getting_started.html">Next &gt;</a></span></div></div></body></html>